{{ define "cards_panel" }}
<div id="card-selector-overlay">
    <div
        class="bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl max-w-sm w-full max-h-[80vh] overflow-y-auto p-6 space-y-6">

        <div class="grid grid-cols-4 gap-3">
            {{ range .Cards }}
            {{ $card := .ToString }}
            {{ if .OK }}
            <div class="card-option bg-slate-900 border border-slate-700 rounded-lg p-1 flex flex-col items-center justify-center cursor-pointer transition-all hover:scale-105 hover:bg-slate-700 hover:border-blue-500 group"
                data-card="{{ $card }}" hx-post="/track-act?action={{ $.Action }}&card={{ $card }}&state={{ $.State }}"
                hx-target="#tracker-grid" hx-swap="beforeend"
                hx-on:click="const btn = document.querySelector('.active-play'); if(btn) { btn.innerText = this.dataset.card; btn.classList.add('bg-blue-600/30', 'border-blue-500/50', 'text-white'); btn.closest('.player-card').classList.add('pointer-events-none', 'opacity-60'); btn.classList.remove('active-play'); } document.getElementById('card-selector-overlay').remove()">
                <div class="text-lg font-bold text-slate-200 group-hover:text-blue-400">{{ $card }}</div>
            </div>
            {{ else }}
            <div
                class="card-option bg-slate-700 border border-slate-700 rounded-lg p-1 flex flex-col items-center justify-center transition-all group">
                <div class="text-lg font-bold text-slate-200">{{ $card }}</div>
            </div>
            {{ end }}
            {{ end }}
        </div>
    </div>
</div>
{{ end }}