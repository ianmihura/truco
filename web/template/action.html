{{ define "action" }}
<div
    class="player-card bg-slate-800 border border-slate-700 rounded-md overflow-hidden shadow-xl animate-in slide-in-from-left duration-300">
    <div class="px-3 py-2">
        <h3 class="text-white font-bold text-xs tracking-wider flex items-center gap-2">
            {{ .ActionTitle }}
        </h3>
    </div>
    <div class="py-1">
        {{ range .Actions }}
        <div class="action-btn px-3 py-1 text-slate-300 text-xs font-medium cursor-pointer transition-all hover:bg-slate-700/50 hover:border-slate-500/50 select-none"
            {{ if eq . "play" }} hx-get="/track-act?action={{ . }}&state={{ $.State }}" hx-target="body"
            hx-swap="beforeend"
            hx-on:click="document.querySelectorAll('.action-btn').forEach(b => b.classList.remove('active-play')); this.classList.add('active-play')"
            {{ else }} hx-get="/track-act?action={{ . }}&state={{ $.State }}" hx-target="#tracker-grid"
            hx-swap="beforeend" hx-trigger="click once"
            hx-on:click="this.closest('.player-card').classList.add('pointer-events-none', 'opacity-60')" {{ end }}>
            {{ . }}
        </div>
        {{ end }}
    </div>
</div>
<script>
    if (typeof updateMatrixStats === 'function') {
        updateMatrixStats({{ .Stats }});
    }
</script>
{{ end }}