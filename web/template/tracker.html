{{ define "tracker" }}
<div id="tracker-grid" class="grid grid-cols-1 md:grid-cols-4 gap-4 w-full mb-8">
    {{ template "action" . }}
</div>

<style>
    .action-btn.selected {
        background-color: rgba(59, 130, 246, 0.4) !important;
        border-color: rgba(59, 130, 246, 0.6) !important;
        color: white !important;
        box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
    }
</style>

<script>
    // Event delegation to handle clicks on action-btn for both static and dynamic elements
    document.getElementById('tracker-grid').addEventListener('click', (e) => {
        const btn = e.target.closest('.action-btn');
        if (!btn) return;

        const card = btn.closest('.player-card');
        if (!card) return;

        // Remove selected class from all buttons in THIS card
        card.querySelectorAll('.action-btn').forEach(b => b.classList.remove('selected'));
        // Add selected class to the clicked button
        btn.classList.add('selected');

        console.log(`Player card selected action: ${btn.dataset.action}`);
    });
</script>
{{ end }}